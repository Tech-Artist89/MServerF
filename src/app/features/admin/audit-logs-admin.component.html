<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>Audit-Logs</h2>
  <button class="btn btn-outline-light" (click)="load()"><i class="bi bi-arrow-clockwise"></i> Aktualisieren</button>
</div>

<div class="card bg-dark border-secondary mb-3">
  <div class="card-body">
    <div class="row g-2">
      <div class="col-md-3">
        <label class="form-label">Aktion</label>
        <input class="form-control" [(ngModel)]="filter.action" placeholder="z.B. upload, download, permission">
      </div>
      <div class="col-md-3">
        <label class="form-label">Actor (User-ID)</label>
        <input class="form-control" [(ngModel)]="filter.actor">
      </div>
      <div class="col-md-4">
        <label class="form-label">Target enth√§lt</label>
        <input class="form-control" [(ngModel)]="filter.target" placeholder="z.B. project:1 oder file:10">
      </div>
      <div class="col-md-3">
        <label class="form-label">Seit</label>
        <input type="datetime-local" class="form-control" [(ngModel)]="filter.since">
      </div>
      <div class="col-md-3">
        <label class="form-label">Bis</label>
        <input type="datetime-local" class="form-control" [(ngModel)]="filter.until">
      </div>
      <div class="col-md-2 d-flex align-items-end">
        <button class="btn btn-primary w-100" (click)="load()">Filtern</button>
      </div>
    </div>
  </div>
</div>

<table class="table table-dark table-striped align-middle">
  <thead>
    <tr><th>Zeit</th><th>Actor</th><th>Aktion</th><th>Target</th><th>Details</th></tr>
  </thead>
  <tbody>
    <tr *ngFor="let l of logs">
      <td>{{ l.created_at | date:'short' }}</td>
      <td>{{ l.actor }}</td>
      <td>{{ l.action }}</td>
      <td>{{ l.target }}</td>
      <td><pre class="mb-0 text-light">{{ l.details | json }}</pre></td>
    </tr>
  </tbody>
</table>
